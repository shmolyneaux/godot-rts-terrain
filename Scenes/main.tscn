[gd_scene load_steps=23 format=3 uid="uid://cacmcn2r2xnrk"]

[ext_resource type="Script" path="res://Test/TestCamera.gd" id="1_m2yar"]
[ext_resource type="Script" path="res://addons/rts_terrain/RtsTerrain.gd" id="1_vb6gr"]
[ext_resource type="Texture2D" uid="uid://bdgj0mv5t50gr" path="res://Assets/Textures/selection_circle_8px.png" id="3_1r4l6"]
[ext_resource type="Script" path="res://Objects/SelectionCircle.gd" id="4_c4b8r"]
[ext_resource type="Script" path="res://Test/Spawner.gd" id="5_2tuc3"]
[ext_resource type="Texture2D" uid="uid://c10m4uwlay2tt" path="res://Assets/Textures/grass.png" id="6_w4tx5"]
[ext_resource type="Script" path="res://Test/PlayerController.gd" id="7_2outt"]
[ext_resource type="PackedScene" uid="uid://iq0vwdwd0ik4" path="res://addons/rts_terrain/Brush.tscn" id="7_33ew6"]
[ext_resource type="Texture2D" uid="uid://fokowgx5cdcl" path="res://Assets/Textures/cliff.png" id="7_cibba"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_rf48w"]
sky_top_color = Color(0.568627, 0.698039, 0.807843, 1)
sky_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)
ground_bottom_color = Color(0.282353, 0.215686, 0.423529, 1)
ground_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)

[sub_resource type="Sky" id="Sky_hbnoh"]
sky_material = SubResource( "ProceduralSkyMaterial_rf48w" )

[sub_resource type="Environment" id="Environment_dnjhw"]
background_mode = 2
sky = SubResource( "Sky_hbnoh" )
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Animation" id="Animation_v4rfe"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("..:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_tpgr8"]
resource_name = "Rotate Around Origin"
length = 4.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2, 3, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.5708, 0), Vector3(0, 3.14159, 0), Vector3(0, 4.71239, 0), Vector3(0, 6.28319, 0)]
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yhjk1"]
albedo_color = Color(0.85098, 0.243137, 1, 1)

[sub_resource type="SphereMesh" id="SphereMesh_vyjk5"]
material = SubResource( "StandardMaterial3D_yhjk1" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lhs7g"]
albedo_texture = ExtResource( "6_w4tx5" )
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0eh33"]
albedo_texture = ExtResource( "7_cibba" )
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2inng"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_jmgta"]
material = SubResource( "StandardMaterial3D_2inng" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jkufq"]
albedo_texture = ExtResource( "6_w4tx5" )
uv1_scale = Vector3(500, 500, 1)
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_m6jlx"]
material = SubResource( "StandardMaterial3D_jkufq" )
size = Vector2(500, 500)

[node name="Main" type="Node3D"]

[node name="Test Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.530674, 0.847576, 0, -0.847576, 0.530674, 10, 7, 9)
script = ExtResource( "1_m2yar" )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( "Environment_dnjhw" )

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.733344, 0.458872, -0.50164, -0.0526559, 0.77398, 0.631016, 0.677815, -0.436338, 0.591757, 0, 0, 0)
shadow_enabled = true
directional_shadow_max_distance = 250.0

[node name="RotationOrigin" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 4)

[node name="Camera3D" type="Camera3D" parent="RotationOrigin"]
transform = Transform3D(1, 0, 0, 0, 0.819152, 0.573576, 0, -0.573576, 0.819152, 0, 4, 6)

[node name="AnimationPlayer" type="AnimationPlayer" parent="RotationOrigin/Camera3D"]
root_node = NodePath("../..")
autoplay = "Rotate Around Origin"
anims/RESET = SubResource( "Animation_v4rfe" )
"anims/Rotate Around Origin" = SubResource( "Animation_tpgr8" )

[node name="DeathCircle" type="Decal" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)
texture_albedo = ExtResource( "3_1r4l6" )
modulate = Color(1, 0, 0, 1)
cull_mask = 1048573
script = ExtResource( "4_c4b8r" )
target = NodePath("../Walk Target")

[node name="Spawner" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.16854, 0, 1.20924)
mesh = SubResource( "SphereMesh_vyjk5" )
script = ExtResource( "5_2tuc3" )

[node name="Timer" type="Timer" parent="Spawner"]
autostart = true

[node name="RtsTerrain" type="Node3D" parent="."]
script = ExtResource( "1_vb6gr" )
ground_material = SubResource( "StandardMaterial3D_lhs7g" )
wall_material = SubResource( "StandardMaterial3D_0eh33" )
width = 21
height = 20
terrain_cliffs = PackedInt32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 3, 2, 1, 0, 0, 0, 0, -1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
terrain_holes = PackedInt32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
terrain_height = PackedFloat32Array(1.08446, 1.09358, 0.919857, 0.634531, 0.335955, 0.247248, 0.176445, 0.0980989, 0.0915326, 0.134204, 0.212785, 0.313028, 0.330186, 0.315684, 0.298556, 0.29288, 0.264881, 0.325539, 0.327733, 0.340444, 0.34125, 0, 1.01254, 1.01815, 0.856677, 0.634754, 0.428466, 0.269386, 0.174169, 0.10894, 0.0915326, 0.134204, 0.215488, 0.28474, 0.320002, 0.316328, 0.301216, 0.29663, 0.322351, 0.320831, 0.323886, 0.359566, 0.360095, 0, 0.824649, 0.768366, 0.619621, 0.537343, 0.476779, 0.322526, 0.188772, 0.0793752, 0.041708, 0.155988, 0.276972, 0.279368, 0.321422, 0.321791, 0.266048, 0.272741, 0.285653, 0.275171, 0.28225, 0.43301, 0.43301, 0, 0.513098, 0.529422, 0.496328, 0.474428, 0.398011, 0.244677, 0.0542187, 0.0389936, 0.0441572, 0.054667, 0.227917, 0.302444, 0.29621, 0.29621, 0.230243, 0.13736, 0.0994467, 0.268827, 0.317939, 0.442406, 0.455077, 0, 0.407659, 0.410463, 0.28615, 0.237149, 0.232961, 0.191225, 0.0597062, 0.0756672, 0.0507734, 0.0922301, 0.218465, 0.268339, 0.269897, 0.295699, 0.113103, 0.113103, 0.207528, 0.415597, 0.408097, 0.449581, 0.53243, 0, 0.231898, 0.239896, 0.210282, 0.169261, 0.140705, 0.122792, 0.12, 0.0785448, 0.0591214, 0.208812, 0.226653, 0.268339, 0.272961, 0.271713, 0.203112, 0.083125, 0.207528, 0.415597, 0.413172, 0.463132, 0.483749, 0, 0.210597, 0.208401, 0.171764, 0.26, 0.275565, 0.178365, 0.14, 0.0947448, 0.0617985, 0.227693, 0.239382, 0.277878, 0.328752, 0.328752, 0.165663, 0.165663, 0.143794, 0.2125, 0.264454, 0.413671, 0.428655, 0, 0.213858, 0.216961, 0.262149, 0.42, 0.42, 0.28, 0.16, 0.065, 0.0728196, 0.235087, 0.345508, 0.351153, 0.344955, 0.296464, 0.261674, 0.220612, 0.133286, 0.1475, 0.268161, 0.3321, 0.338439, 0, 0.233509, 0.238574, 0.243393, 0.4, 0.2, 0.2, 0.16, 0.065, 0.065, 0.390612, 0.475247, 0.497524, 0.434611, 0.350845, 0.301103, 0.228203, 0.136473, 0.155775, 0.245187, 0.279776, 0.282856, 0, 0.243634, 0.232969, 0.243745, 0.18, 0.2, 0.2, 0.2, 0.14, 0.02, 0.440462, 0.626751, 0.67804, 0.708314, 0.560095, 0.355317, 0.213907, 0.232403, 0.147722, 0.206638, 0.302595, 0.262418, 0, 0.112223, 0.141222, 0.147367, 0.218803, 0.218803, 0.338725, 0.341809, 0.422505, 0.428388, 0.453635, 0.742873, 0.900213, 0.9058, 0.746185, 0.414805, 0.212606, 0.126606, 0.0724641, 0.1556, 0.233693, 0.221483, 0, 0.107123, 0.134002, 0.153041, 0.228811, 0.24189, 0.327377, 0.349732, 0.376565, 0.479956, 0.529772, 0.728858, 0.989553, 0.981425, 0.808436, 0.493223, 0.224043, 0.131733, 0.12, 0.221488, 0.233079, 0.198451, 0, 0.153435, 0.150382, 0.178532, 0.185672, 0.230133, 0.290904, 0.356218, 0.438993, 0.465862, 0.511185, 0.575504, 0.807684, 0.817225, 0.759838, 0.559521, 0.203973, 0.207221, 0.210817, 0.278918, 0.265624, 0.223787, 0, 0.132912, 0.132912, 0.186111, 0.185762, 0.122701, 0.180628, 0.349214, 0.395977, 0.446928, 0.463963, 0.439012, 0.524361, 0.518261, 0.530411, 0.396476, 0.195383, 0.20912, 0.244567, 0.2475, 0.21792, 0.202669, 0, 0.0816511, 0.11312, 0.257662, 0.24539, 0.121248, 0.132392, 0.236748, 0.35965, 0.323646, 0.333082, 0.340982, 0.412624, 0.396839, 0.26869, 0.205435, 0.1446, 0.163559, 0.163559, 0.18375, 0.15339, 0.138566, 0, 0.0286831, 0.0232267, 0.267504, 0.257978, 0.141538, 0.123058, 0.12976, 0.196487, 0.191853, 0.282596, 0.221015, 0.22597, 0.260325, 0.190809, 0.155702, 0.126623, 0.135643, 0.127932, 0.126767, 0.13138, 0.117674, 0, -0.0586162, -0.0566079, 0.333772, 0.330211, 0.308696, 0.151844, 0.0884744, 0.134768, 0.134768, 0.0772014, 0.173531, 0.172387, 0.231706, 0.17294, 0.129884, 0.0473424, 0.0351995, 0.0312524, 0.0981778, 0.213061, 0.211087, 0, 0.000296024, 0.00215181, 0.341387, 0.338659, 0.309992, 0.148029, 0.138898, 0.150591, 0.161172, 0.161172, 0.15227, 0.15227, 0.12883, 0.142682, 0.115491, 0.0659649, 0.0535842, 0.0886319, 0.167496, 0.377025, 0.378621, 0, -0.0584632, -0.0584632, 0.062188, 0.078074, 0.190949, 0.136398, 0.136398, 0.150591, 0.180332, 0.161172, 0.11942, 0.11942, 0.122589, 0.125281, 0.109842, 0.0748557, 0.112057, 0.231161, 0.355066, 0.351306, 0.350073, 0, -0.080742, -0.080742, 0.062188, 0.01, 0.14, 0.136398, 0.136398, 0.180332, 0.180332, 0.208125, 0.11942, 0.11942, 0.122589, 0.083903, 0.079397, 0.0730013, 0.131415, 0.239059, 0.359063, 0.351514, 0.38215, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)

[node name="Walk Target" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)

[node name="Walk Target" type="MeshInstance3D" parent="Walk Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0914876, 0)
mesh = SubResource( "SphereMesh_jmgta" )
skeleton = NodePath("../..")

[node name="PlayerController" type="Node" parent="."]
script = ExtResource( "7_2outt" )

[node name="Brush" parent="PlayerController" instance=ExtResource( "7_33ew6" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.26442, -1.90735e-06, 2.54246)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource( "PlaneMesh_m6jlx" )

[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="input_event" from="RtsTerrain" to="PlayerController" method="_on_rts_terrain_input_event"]
