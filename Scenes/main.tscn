[gd_scene load_steps=31 format=3 uid="uid://dgb7u13ogxwhe"]

[ext_resource type="PackedScene" path="res://Objects/GameCamera.tscn" id="1_8r48a"]
[ext_resource type="Script" path="res://Test/DebugDrawNavigation.gd" id="1_ojxt8"]
[ext_resource type="Script" path="res://addons/rts_terrain/RtsTerrain.gd" id="1_vb6gr"]
[ext_resource type="Texture2D" uid="uid://bdgj0mv5t50gr" path="res://Assets/Textures/selection_circle_8px.png" id="3_1r4l6"]
[ext_resource type="Script" path="res://Objects/SelectionCircle.gd" id="4_c4b8r"]
[ext_resource type="Script" path="res://Test/Spawner.gd" id="5_2tuc3"]
[ext_resource type="ArrayMesh" uid="uid://1dwbovgwvtv1" path="res://Assets/Models/simple_cliff_outer.res" id="6_mmt4s"]
[ext_resource type="Material" uid="uid://cu1fbgyeu3ybv" path="res://Assets/Textures/uv_debug_material.tres" id="6_reguv"]
[ext_resource type="Texture2D" uid="uid://c10m4uwlay2tt" path="res://Assets/Textures/grass.png" id="6_w4tx5"]
[ext_resource type="Script" path="res://Test/PlayerController.gd" id="7_2outt"]
[ext_resource type="PackedScene" uid="uid://iq0vwdwd0ik4" path="res://addons/rts_terrain/Brush.tscn" id="7_33ew6"]
[ext_resource type="ArrayMesh" uid="uid://cabj6krllfb57" path="res://Assets/Models/simple_cliff_inner.res" id="7_hsf53"]
[ext_resource type="ArrayMesh" uid="uid://cnd5k7l35eqtw" path="res://Assets/Models/simple_cliff_side1.res" id="8_hq4c1"]
[ext_resource type="ArrayMesh" uid="uid://50b1ex1gwir7" path="res://Assets/Models/simple_ramp_upper_left.res" id="9_o8tdy"]
[ext_resource type="ArrayMesh" uid="uid://dhc2yui4ttpmc" path="res://Assets/Models/simple_ramp_upper_right.res" id="10_axwwt"]
[ext_resource type="ArrayMesh" uid="uid://72w2jaj5pr5y" path="res://Assets/Models/simple_ramp_lower_left.res" id="11_icv1f"]
[ext_resource type="ArrayMesh" uid="uid://ca7dvworjpm5c" path="res://Assets/Models/simple_ramp_lower_right.res" id="12_gupwy"]
[ext_resource type="Shader" uid="uid://wdhdxn6vgr7b" path="res://Assets/Textures/square_fog.tres" id="17_tejct"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_rf48w"]
sky_top_color = Color(0.568627, 0.698039, 0.807843, 1)
sky_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)
ground_bottom_color = Color(0.282353, 0.215686, 0.423529, 1)
ground_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)

[sub_resource type="Sky" id="Sky_hbnoh"]
sky_material = SubResource( "ProceduralSkyMaterial_rf48w" )

[sub_resource type="Environment" id="Environment_dnjhw"]
background_mode = 2
sky = SubResource( "Sky_hbnoh" )
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yhjk1"]
albedo_color = Color(0.85098, 0.243137, 1, 1)

[sub_resource type="SphereMesh" id="SphereMesh_vyjk5"]
material = SubResource( "StandardMaterial3D_yhjk1" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_q0c2w"]
albedo_texture = ExtResource( "6_w4tx5" )
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2inng"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_jmgta"]
material = SubResource( "StandardMaterial3D_2inng" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jkufq"]
albedo_texture = ExtResource( "6_w4tx5" )
uv1_scale = Vector3(500, 500, 1)
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_m6jlx"]
material = SubResource( "StandardMaterial3D_jkufq" )
size = Vector2(500, 500)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rj002"]
render_priority = 0
shader = ExtResource( "17_tejct" )
shader_param/max_x = null
shader_param/max_z = null
shader_param/min_x = null
shader_param/min_z = null

[sub_resource type="QuadMesh" id="QuadMesh_4b8hm"]
material = SubResource( "ShaderMaterial_rj002" )
size = Vector2(200, 200)

[node name="Main" type="Node3D"]

[node name="DebugDrawNavigation" type="Button" parent="."]
offset_right = 8.0
offset_bottom = 31.0
text = "Toggle Navigation Debug"
script = ExtResource( "1_ojxt8" )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GameCamera" parent="." instance=ExtResource( "1_8r48a" )]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( "Environment_dnjhw" )

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.733344, 0.458872, -0.50164, -0.0526559, 0.77398, 0.631016, 0.677815, -0.436338, 0.591757, 0, 0, 0)
shadow_enabled = true
directional_shadow_max_distance = 250.0

[node name="Spawner" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01878, 0.865115, 1.9168)
mesh = SubResource( "SphereMesh_vyjk5" )
script = ExtResource( "5_2tuc3" )

[node name="Timer" type="Timer" parent="Spawner"]
wait_time = 0.2
autostart = true

[node name="RtsTerrain" type="Node3D" parent="."]
script = ExtResource( "1_vb6gr" )
material = SubResource( "StandardMaterial3D_q0c2w" )
cliff_material = ExtResource( "6_reguv" )
outer_corner = ExtResource( "6_mmt4s" )
inner_corner = ExtResource( "7_hsf53" )
side = ExtResource( "8_hq4c1" )
upper_left_ramp = ExtResource( "9_o8tdy" )
upper_right_ramp = ExtResource( "10_axwwt" )
lower_left_ramp = ExtResource( "11_icv1f" )
lower_right_ramp = ExtResource( "12_gupwy" )
width = 21
height = 19
terrain_cliffs = PackedInt32Array(637534208, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1174405120, 620756992, 1728053248, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 117440512, 1694498816, 620756992, 1694498816, 1073741824, 1073741824, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 1073741824, 1073741824, 0, 0, 0, 0, 0, 0, 0, 0, 1107296256, 1207959552, 1090519040, 0, 0, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 637534208, 1157627904, 1140850688, 1224736768, 1124073472, 1157627904, 1174405120, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 536870912, 620756992, 1610612737, 1, 536870913, 536870913, 1, 1694498816, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 553648128, 587202560, 1610612737, 536870913, 536870913, 536870913, 536870913, 1694498816, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 671088640, 687865856, 536870913, 536870913, 536870913, 536870913, 536870913, 1677721600, 1644167168, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 570425344, 603979776, 1610612737, 536870913, 536870913, 536870913, 536870913, 1761607680, 1744830464, 0, 620756992, 1694498816, 620756992, 1191182336, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 654311424, 1610612737, 536870913, 536870913, 1, 536870913, 1660944384, 1627389952, 0, 620756992, 1694498816, 620756992, 1728053248, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 117440512, 1, 536870913, 1, 536870913, 536870913, 1694498816, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 620756992, 1, 1, 1, 1, 1, 1694498816, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 1073741824, 1073741824, 1073741824, 0, 0, 0, 0, 100663296, 83886080, 50331648, 150994944, 67108864, 83886080, 1711276032, 0, 0, 620756992, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16777216, 134217728, 33554432, 0, 0, 0, 0, 620756992, 1694498816, 620756992, 1191182336, 1157627904, 1157627904, 1157627904, 1157627904, 1174405120, 0, 0, 0, 0, 0, 0, 0, 0, 0, 637534208, 1157627904, 1157627904, 654311424, 1694498816, 620756992, 1728053248, 83886080, 83886080, 83886080, 83886080, 1711276032, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100663296, 83886080, 83886080, 117440512, 1694498816, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 620756992, 1694498816, 620756992, 1191182336, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 654311424, 1694498816, 100663296, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 1711276032)
terrain_holes = PackedInt32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
terrain_height = PackedFloat32Array(0.04, 0.16, 0.22, 0.18, 0.14, 0.1, 0.06, 0.08, 0.08, 0.06, 0.06, 0.02, 0.02, 0.06, 0.06, 0.04, 0.04, 0.02, 0, 0.04, 0.04, 0, 0.08, 0.4, 0.46, 0.260816, 0.188827, 0.120413, 0.1, 0.12, 0.12, 0.08, 0.08, 0.08, 0.08, 0.08, 0.12, 0.16, 0.16, 0.12, 0.1, 0.1, 0.04, 0, 0.088, 0.336705, 0.327715, 0.156675, 0.103643, 0.0844127, 0.12, 0.08, 0.06, 0.08, 0.1, 0.08, 0.06, 0.04, 0.0866627, 0.119063, 0.1581, 0.1905, 0.2, 0.12, 0.04, 0.02, 0.106, 0.224925, 0.181915, 0.085345, 0.104358, 0.13765, 0.12, 0.06, 0.08, 0.14, 0.1, 0.18, 0.16, 0.0298603, 0.129249, 0.128781, 0.0832375, 0.170717, 0.18, 0.1, 0.06, 0.02, 0.1, 0.19795, 0.11065, 0.133811, 0.232171, 0.197185, 0.103645, 0.08, 0.1, 0.1, 0.02, 0.2, 0.2, 0.0213144, 0.111875, 0.204602, 0.183143, 0.121847, 0.1, 0.04, 0.02, 0, 0.06, 0.23395, 0.17545, 0.133223, 0.224939, 0.150402, 0.087794, 0.081495, 0.0657, 0.06, 0.0269164, 0.120916, 0.14, 0.042073, 0.0359373, 0.183564, 0.199474, 0.08, 0.06, 0.02, 0.04, 0.02, 0.04, 0.2, 0.22, 0.084, 0.0398291, 0.0871525, 0.103712, 0.0625732, 0.187535, 0.28771, 0.142544, 0.120321, 0.18, 0.0990125, 0.0630125, 0.06, 0.04, 0.0589919, 0.0680258, 0.060634, 0.0712014, 0.0596403, 0.02, 0.08, 0.2, 0.26, 0.14, 0.16, 0.229197, 0.303178, 0.535407, 0.595829, 0.227894, 0.13777, 0.136118, 0.101917, 0.0965982, 0.0503664, 0.019494, 0.0779804, 0.173433, 0.156693, 0.0786741, 0.0573506, 0.02, 0.06, 0.14, 0.2, 0.12, 0.1, 0.188137, 0.314086, 0.506151, 0.598519, 0.335236, 0.218959, 0.161188, 0.0902197, 0.0605778, 0.151645, 0.180422, 0.369072, 0.45169, 0.280534, 0.149302, 0.114738, 0.1, 0.22, 0.18, 0.08, 0.04, 0.08, 0.06, 0.103568, 0.249646, 0.264856, 0.300788, 0.266049, 0.205561, 0.154145, 0.10815, 0.16537, 0.195182, 0.380497, 0.528922, 0.349438, 0.165764, 0.121234, 0.1, 0.24, 0.2, 0.14, 0.16, 0.12, 0.1, 0.1, 0.08, 0.04, 0.08, 0.20525, 0.182842, 0.115681, 0.112544, 0.149776, 0.164855, 0.235588, 0.227916, 0.183779, 0.145591, 0.00864041, 0.04, 0.18, 0.18, 0.1, 0.14, 0.08, 0.1, 0.14, 0.06, 0.02, 0.02, 0.16506, 0.17532, 0.0908156, 0.0522162, 0.0809947, 0.102621, 0.161902, 0.130384, 0.192549, 0.201427, 0.00864041, 0.04, 0.14, 0.14, 0.1, 0.12, 0.1, 0.08, 0.12, 0.14, 0.06, 0.02, 0.301852, 0.246538, 0.122377, 0.0401141, 0.111553, 0.22, 0.16, 0.0894031, 0.173343, 0.182953, 0, 0.02, 0.08, 0.12, 0.16, 0.2, 0.14, 0.16, 0.22, 0.2, 0.100793, 0.0302051, 0.233433, 0.279948, 0.270138, 0.30699, 0.300028, 0.2326, 0.172365, 0.0844308, 0.0967715, 0.0988605, 0, 0.02, 0.08, 0.14, 0.12, 0.12, 0.12, 0.16, 0.18, 0.0992005, 0.045892, 0.0749473, 0.170493, 0.281524, 0.573832, 0.527042, 0.335544, 0.16237, 0.126759, 0.086604, 0.0840571, 0.077999, 0.00961875, 0.06, 0.1, 0.08, 0.1, 0.08, 0.1, 0.08, 0.02, 0.0392005, 0.0271579, 0.0717642, 0.165824, 0.268976, 0.506799, 0.467698, 0.316621, 0.179164, 0.145312, 0.0724834, 0.115663, 0.110652, 0.00961875, 0.08, 0.2, 0.18, 0.14, 0.12, 0.12, 0.1, 0.06, 0.06, 0.0387784, 0.0259906, 0.0404097, 0.0541967, 0.165498, 0.197432, 0.125805, 0.182038, 0.141265, 0.0341578, 0.150158, 0.173009, 0.02, 0.06, 0.24, 0.24, 0.14, 0.14, 0.1, 0.08, 0.08, 0.1, 0.08, 0.04, 0.06, 0.101861, 0.126366, 0.198967, 0.253252, 0.269941, 0.208937, 0.060249, 0.0843388, 0.1341, 0.0645, 0.02, 0.18, 0.18, 0.1, 0.16, 0.1, 0.06, 0.06, 0.12, 0.12, 0.08, 0.08, 0.119861, 0.126366, 0.189125, 0.32503, 0.36207, 0.243133, 0.102937, 0.0974608, 0.1341, 0.0825, 0, 0.06, 0.08, 0.04, 0.08, 0.08, 0.04, 0.04, 0.06, 0.06, 0.06, 0.04, 0.06, 0.06, 0.0739917, 0.208795, 0.226803, 0.121815, 0.0858147, 0.06, 0.06, 0.04)

[node name="DeathCircle" type="Decal" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.0008, 0, 15.9952)
extents = Vector3(0.855, 1, 0.855)
texture_albedo = ExtResource( "3_1r4l6" )
modulate = Color(1, 0, 0, 1)
cull_mask = 1048573
script = ExtResource( "4_c4b8r" )
target = NodePath("../Walk Target")
target_radius = 0.855

[node name="Walk Target" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.0008, 0, 15.9952)

[node name="Walk Target" type="MeshInstance3D" parent="Walk Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0914876, 0)
mesh = SubResource( "SphereMesh_jmgta" )
skeleton = NodePath("../..")

[node name="PlayerController" type="Node" parent="."]
script = ExtResource( "7_2outt" )

[node name="Brush" parent="PlayerController" instance=ExtResource( "7_33ew6" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20.8991, -1.90735e-06, -107.585)

[node name="Ground Plane" type="MeshInstance3D" parent="."]
mesh = SubResource( "PlaneMesh_m6jlx" )

[node name="SqaureFog" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 9.3292, 0.1, 9.57047)
mesh = SubResource( "QuadMesh_4b8hm" )

[connection signal="pressed" from="DebugDrawNavigation" to="DebugDrawNavigation" method="_on_debug_draw_navigation_pressed"]
[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="input_event" from="RtsTerrain" to="PlayerController" method="_on_rts_terrain_input_event"]
