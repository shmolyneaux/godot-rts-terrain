[gd_scene load_steps=28 format=3 uid="uid://cacmcn2r2xnrk"]

[ext_resource type="Script" path="res://Test/TestCamera.gd" id="1_m2yar"]
[ext_resource type="Script" path="res://addons/rts_terrain/RtsTerrain.gd" id="1_vb6gr"]
[ext_resource type="Texture2D" uid="uid://bdgj0mv5t50gr" path="res://Assets/Textures/selection_circle_8px.png" id="3_1r4l6"]
[ext_resource type="Script" path="res://Objects/SelectionCircle.gd" id="4_c4b8r"]
[ext_resource type="Script" path="res://Test/Spawner.gd" id="5_2tuc3"]
[ext_resource type="ArrayMesh" uid="uid://dc1kiu6a416u0" path="res://Assets/Models/cliff_corner_outer.res" id="6_eedhj"]
[ext_resource type="Material" uid="uid://cu1fbgyeu3ybv" path="res://Assets/Textures/uv_debug_material.tres" id="6_reguv"]
[ext_resource type="Texture2D" uid="uid://c10m4uwlay2tt" path="res://Assets/Textures/grass.png" id="6_w4tx5"]
[ext_resource type="Script" path="res://Test/PlayerController.gd" id="7_2outt"]
[ext_resource type="PackedScene" uid="uid://iq0vwdwd0ik4" path="res://addons/rts_terrain/Brush.tscn" id="7_33ew6"]
[ext_resource type="ArrayMesh" uid="uid://dptr2uru6ysyh" path="res://Assets/Models/cliff_corner_inner.res" id="7_w83in"]
[ext_resource type="ArrayMesh" uid="uid://ceel0pbh8ecwm" path="res://Assets/Models/cliff_side_1.res" id="8_1j2wl"]
[ext_resource type="ArrayMesh" uid="uid://bxibin3tl2qa8" path="res://Assets/Models/cliff_ramp_upper_left.res" id="9_yh47b"]
[ext_resource type="ArrayMesh" uid="uid://bo2wk4jomkeul" path="res://Assets/Models/cliff_ramp_upper_right.res" id="10_i5bvk"]
[ext_resource type="ArrayMesh" uid="uid://b0n56hgbmhdeo" path="res://Assets/Models/cliff_ramp_lower_left.res" id="11_y6una"]
[ext_resource type="ArrayMesh" uid="uid://7enu1krj8q7u" path="res://Assets/Models/cliff_ramp_lower_right.res" id="12_vwgaf"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_rf48w"]
sky_top_color = Color(0.568627, 0.698039, 0.807843, 1)
sky_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)
ground_bottom_color = Color(0.282353, 0.215686, 0.423529, 1)
ground_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)

[sub_resource type="Sky" id="Sky_hbnoh"]
sky_material = SubResource( "ProceduralSkyMaterial_rf48w" )

[sub_resource type="Environment" id="Environment_dnjhw"]
background_mode = 2
sky = SubResource( "Sky_hbnoh" )
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Animation" id="Animation_v4rfe"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("..:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_tpgr8"]
resource_name = "Rotate Around Origin"
length = 4.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2, 3, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.5708, 0), Vector3(0, 3.14159, 0), Vector3(0, 4.71239, 0), Vector3(0, 6.28319, 0)]
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yhjk1"]
albedo_color = Color(0.85098, 0.243137, 1, 1)

[sub_resource type="SphereMesh" id="SphereMesh_vyjk5"]
material = SubResource( "StandardMaterial3D_yhjk1" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2inng"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_jmgta"]
material = SubResource( "StandardMaterial3D_2inng" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jkufq"]
albedo_texture = ExtResource( "6_w4tx5" )
uv1_scale = Vector3(500, 500, 1)
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_m6jlx"]
material = SubResource( "StandardMaterial3D_jkufq" )
size = Vector2(500, 500)

[node name="Main" type="Node3D"]

[node name="Test Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.530674, 0.847576, 0, -0.847576, 0.530674, 10, 7, 9)
script = ExtResource( "1_m2yar" )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( "Environment_dnjhw" )

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.733344, 0.458872, -0.50164, -0.0526559, 0.77398, 0.631016, 0.677815, -0.436338, 0.591757, 0, 0, 0)
shadow_enabled = true
directional_shadow_max_distance = 250.0

[node name="RotationOrigin" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 4)

[node name="Camera3D" type="Camera3D" parent="RotationOrigin"]
transform = Transform3D(1, 0, 0, 0, 0.819152, 0.573576, 0, -0.573576, 0.819152, 0, 4, 6)

[node name="AnimationPlayer" type="AnimationPlayer" parent="RotationOrigin/Camera3D"]
root_node = NodePath("../..")
autoplay = "Rotate Around Origin"
anims/RESET = SubResource( "Animation_v4rfe" )
"anims/Rotate Around Origin" = SubResource( "Animation_tpgr8" )

[node name="DeathCircle" type="Decal" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)
texture_albedo = ExtResource( "3_1r4l6" )
modulate = Color(1, 0, 0, 1)
cull_mask = 1048573
script = ExtResource( "4_c4b8r" )
target = NodePath("../Walk Target")

[node name="Spawner" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0798898, 0, 0.742813)
mesh = SubResource( "SphereMesh_vyjk5" )
script = ExtResource( "5_2tuc3" )

[node name="Timer" type="Timer" parent="Spawner"]
autostart = true

[node name="RtsTerrain" type="Node3D" parent="."]
script = ExtResource( "1_vb6gr" )
material = ExtResource( "6_reguv" )
outer_corner = ExtResource( "6_eedhj" )
inner_corner = ExtResource( "7_w83in" )
side = ExtResource( "8_1j2wl" )
upper_left_ramp = ExtResource( "9_yh47b" )
upper_right_ramp = ExtResource( "10_i5bvk" )
lower_left_ramp = ExtResource( "11_y6una" )
lower_right_ramp = ExtResource( "12_vwgaf" )
width = 19
height = 19
terrain_cliffs = PackedInt32Array(1073741824, 637534208, 654311424, 1191182336, 1157627904, 1174405120, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1073741824, 100663296, 117440512, 1728053248, 83886080, 1711276032, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1073741824, 1073741824, 620756992, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100663296, 1711276032, 0, 0, 0, 0, 0, 0, 0, 0, 1107296256, 1207959552, 1090519040, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 637534208, 1157627905, 1140850688, 1224736768, 1124073472, 1157627905, 1174405121, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 620756992, 1610612737, 1, 536870913, 536870913, 1, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 553648128, 587202560, 1610612737, 536870913, 536870913, 536870913, 536870913, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 671088640, 687865856, 536870913, 536870913, 536870913, 536870913, 536870913, 1677721600, 1644167168, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 570425344, 603979776, 1610612737, 536870913, 536870913, 536870913, 536870913, 1761607680, 1744830464, 0, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 654311424, 1610612737, 536870913, 536870913, 536870913, 536870913, 1660944384, 1627389952, 0, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 117440512, 1610612737, 536870913, 536870913, 536870913, 536870913, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 620756992, 1, 536870913, 536870913, 536870913, 536870913, 1694498816, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100663297, 83886081, 50331648, 150994944, 67108864, 83886081, 1711276032, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16777216, 134217728, 33554432, 0, 0, 0, 0, 0, 0, 637534208, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1157627904, 1174405120, 0, 0, 0, 0, 0, 637534208, 1157627904, 1157627904, 0, 0, 100663296, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 83886080, 1711276032, 0, 0, 0, 0, 0, 100663296, 83886080, 83886080, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
terrain_holes = PackedInt32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
terrain_height = PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)

[node name="Walk Target" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)

[node name="Walk Target" type="MeshInstance3D" parent="Walk Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0914876, 0)
mesh = SubResource( "SphereMesh_jmgta" )
skeleton = NodePath("../..")

[node name="PlayerController" type="Node" parent="."]
script = ExtResource( "7_2outt" )

[node name="Brush" parent="PlayerController" instance=ExtResource( "7_33ew6" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.72289, -1.90735e-06, 2.54246)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource( "PlaneMesh_m6jlx" )

[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="input_event" from="RtsTerrain" to="PlayerController" method="_on_rts_terrain_input_event"]
