[gd_scene load_steps=17 format=3 uid="uid://cacmcn2r2xnrk"]

[ext_resource type="Script" path="res://Test/TestCamera.gd" id="1_m2yar"]
[ext_resource type="Script" path="res://addons/rts_terrain/RtsTerrain.gd" id="1_vb6gr"]
[ext_resource type="Texture2D" uid="uid://bdgj0mv5t50gr" path="res://Assets/Textures/selection_circle_8px.png" id="3_1r4l6"]
[ext_resource type="Script" path="res://Objects/SelectionCircle.gd" id="4_c4b8r"]
[ext_resource type="Script" path="res://Test/Spawner.gd" id="5_2tuc3"]
[ext_resource type="Script" path="res://Test/PlayerController.gd" id="7_2outt"]
[ext_resource type="PackedScene" uid="uid://iq0vwdwd0ik4" path="res://addons/rts_terrain/Brush.tscn" id="7_33ew6"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_rf48w"]
sky_top_color = Color(0.568627, 0.698039, 0.807843, 1)
sky_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)
ground_bottom_color = Color(0.282353, 0.215686, 0.423529, 1)
ground_horizon_color = Color(0.672549, 0.704902, 0.734314, 1)

[sub_resource type="Sky" id="Sky_hbnoh"]
sky_material = SubResource( "ProceduralSkyMaterial_rf48w" )

[sub_resource type="Environment" id="Environment_dnjhw"]
background_mode = 2
sky = SubResource( "Sky_hbnoh" )
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Animation" id="Animation_v4rfe"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("..:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_tpgr8"]
resource_name = "Rotate Around Origin"
length = 4.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2, 3, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 1.5708, 0), Vector3(0, 3.14159, 0), Vector3(0, 4.71239, 0), Vector3(0, 6.28319, 0)]
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yhjk1"]
albedo_color = Color(0.85098, 0.243137, 1, 1)

[sub_resource type="SphereMesh" id="SphereMesh_vyjk5"]
material = SubResource( "StandardMaterial3D_yhjk1" )
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2inng"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_jmgta"]
material = SubResource( "StandardMaterial3D_2inng" )
radius = 0.1
height = 0.2

[node name="Main" type="Node3D"]

[node name="Test Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.530674, 0.847576, 0, -0.847576, 0.530674, 10, 7, 9)
script = ExtResource( "1_m2yar" )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( "Environment_dnjhw" )

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.704981, 0.614208, -0.354613, -9.83849e-09, 0.5, 0.866026, 0.709226, -0.610531, 0.35249, 0, 0, 0)
shadow_enabled = true
directional_shadow_max_distance = 250.0

[node name="RotationOrigin" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 4)

[node name="Camera3D" type="Camera3D" parent="RotationOrigin"]
transform = Transform3D(1, 0, 0, 0, 0.819152, 0.573576, 0, -0.573576, 0.819152, 0, 4, 6)

[node name="AnimationPlayer" type="AnimationPlayer" parent="RotationOrigin/Camera3D"]
root_node = NodePath("../..")
autoplay = "Rotate Around Origin"
anims/RESET = SubResource( "Animation_v4rfe" )
"anims/Rotate Around Origin" = SubResource( "Animation_tpgr8" )

[node name="DeathCircle" type="Decal" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)
texture_albedo = ExtResource( "3_1r4l6" )
modulate = Color(1, 0, 0, 1)
cull_mask = 1048573
script = ExtResource( "4_c4b8r" )
target = NodePath("../Walk Target")

[node name="Spawner" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.16854, 0, 1.20924)
mesh = SubResource( "SphereMesh_vyjk5" )
script = ExtResource( "5_2tuc3" )

[node name="Timer" type="Timer" parent="Spawner"]
autostart = true

[node name="RtsTerrain" type="Node3D" parent="."]
script = ExtResource( "1_vb6gr" )
width = 20
height = 19
terrain_cliffs = PackedInt32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
terrain_holes = PackedInt32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)

[node name="Walk Target" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.5, 0, 16.5)

[node name="Walk Target" type="MeshInstance3D" parent="Walk Target"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0914876, 0)
mesh = SubResource( "SphereMesh_jmgta" )
skeleton = NodePath("../..")

[node name="PlayerController" type="Node" parent="."]
script = ExtResource( "7_2outt" )

[node name="Brush" parent="PlayerController" instance=ExtResource( "7_33ew6" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.84919, 0, 2.08602)

[connection signal="timeout" from="Spawner/Timer" to="Spawner" method="_on_timer_timeout"]
[connection signal="input_event" from="RtsTerrain" to="PlayerController" method="_on_rts_terrain_input_event"]
